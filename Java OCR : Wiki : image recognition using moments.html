<!DOCTYPE html>
<!-- Server: sfn-web-5 -->


  












<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="en" class="no-js ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]>--> <html lang="en" class="no-js"> <!--<![endif]-->
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
    <title>Java OCR / Wiki / image recognition using moments</title>
    
<meta id="webtracker" name="webtracker" content='{&#34;event_id&#34;: &#34;9b15962e-c080-11e3-ab3e-0200ac1d2937&#34;, &#34;project&#34;: &#34;javaocr&#34;, &#34;action_type&#34;: &#34;wiki&#34;}' />

<script src="http://a.fsdn.com/allura/nf/1396471045/_ew_/theme/sftheme/js/sftheme/modernizr.custom.90514.js"></script>

<script src="http://a.fsdn.com/allura/nf/1396471045/_ew_/theme/sftheme/js/sftheme/jquery-1.8.0.min.js"></script>

<script src="http://a.fsdn.com/allura/nf/1396471045/_ew_/theme/sftheme/js/sftheme/header.js"></script>
<!--[if lt IE 7 ]>
  <script src="http://a.fsdn.com/allura/nf/1396471045/_ew_/theme/sftheme/js/sftheme/dd_belatedpng.js"></script>
  <script> DD_belatedPNG.fix('img, .png_bg'); //fix any <img> or .png_bg background-images </script>
<![endif]-->
<link href='//fonts.googleapis.com/css?family=Ubuntu:regular' rel='stylesheet' type='text/css'>
<style type="text/css">
    @font-face {
        font-family: "Pictos";
        src: url('http://a.fsdn.com/allura/nf/1396471045/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.eot');
        src: local("â˜º"), url('http://a.fsdn.com/allura/nf/1396471045/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.woff') format('woff'), url('http://a.fsdn.com/allura/nf/1396471045/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.ttf') format('truetype'), url('http://a.fsdn.com/allura/nf/1396471045/_ew_/theme/sftheme/css/fonts/sftheme/pictos-web.svg') format('svg');
    }
</style>
    <script type="text/javascript">
            /*jslint onevar: false, nomen: false, evil: true, css: true, plusplus: false, white: false, forin: true, on: true, immed: false */
            /*global confirm, alert, unescape, window, jQuery, $, net, COMSCORE */
    </script>
    
      <!-- ew:head_css -->

    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1396471045/_ew_/allura/css/forge/hilite.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1396471045/_ew_/tool/wiki/css/wiki.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="/nf/tool_icon_css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1396471045/_ew_/theme/sftheme/css/forge.css"
                >
    
      <link rel="stylesheet"
                type="text/css"
                href="http://a.fsdn.com/allura/nf/1396471045/_ew_/_slim/css?href=css%2Fmarkitup_sf.css%3Bcss%2Fpage_list.css%3Bcss%2Fjquery.tagsinput.css"
                >
    
      
<!-- /ew:head_css -->

    
    
    
      <!-- ew:head_js -->

    
      
<!-- /ew:head_js -->

    
    

    
      <style type="text/css">
        #page-body.project---init-- #top_nav { display: none; }
#page-body.project---init-- #nav_menu_holder { display: none; margin-bottom: 0; }
#page-body.project---init-- #content_base {margin-top: 0; }
      </style>
    
    
<style>
  .hidden { display: none }
  a.notfound { color: #f00; }
</style>

      <style>.XHqZcMGkzTOVAnGNIiM { display:none }</style>

    
<link rel="alternate" type="application/rss+xml" title="Page RSS" href="feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Page Atom" href="feed.atom"/>
<link rel="alternate" type="application/rss+xml" title="Wiki RSS" href="../feed.rss"/>
<link rel="alternate" type="application/atom+xml" title="Wiki Atom" href="../feed.atom"/>

    
    


<script type="text/javascript">
    var _gaq = _gaq || [];

    function _add_tracking(prefix, tracking_id, send_user) {
        _gaq.push([prefix+'._setAccount', tracking_id]);
        _gaq.push([prefix+'._setCustomVar', 1, 'Page Type', 'wiki', 3]);_gaq.push([prefix+'._trackPageview']);
    }
      _add_tracking('sfnt1', 'UA-32013-6', true);
      _add_tracking('sfnt2', 'UA-36130941-1', true);
    

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' === document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
  </head>

  <body class="wiki-image_recognition_using_moments" id="forge">
    <h2 class="hidden">
        <span style="color:red">Error:</span> CSS did not load.<br>
        This may happen on the first request due to CSS mimetype issues.
        Try clearing your browser cache and refreshing.
        <hr>
    </h2>
    
    
      <!-- ew:body_top_js -->

    
      
<!-- /ew:body_top_js -->

    
    
    
<header id="site-header">
    <div class="wrapper">
        <a href="/" class="logo">
            <span>SourceForge</span>
        </a>
        
        <form method="get" action="/directory/">
            <input type="text" id="words" name="q" placeholder="Search">
        </form>
        
        <!--Switch to {language}-->
        <nav id="nav-site">
            <a href="/directory/" title="Browse our software.">Browse</a>
            <a href="/directory/enterprise" title="Browse our Enterprise software.">Enterprise</a>
            <a href="/blog/" title="Read the latest news from the SF HQ.">Blog</a>
            <a href="/support" title="Contact us for help and feedback.">Help</a>
            <a href="/jobs?source=header" title="Search 80k+ tech jobs." class="featured-link">Jobs</a>
        </nav>
        <nav id="nav-account">
            
              <div class="logged_out">
                <a href="/account/login.php">Log In</a>
                <span>or</span>
                <a href="https://sourceforge.net/user/registration/">Join</a>
              </div>
            
        </nav>
        
    </div>
</header>
<header id="site-sec-header">
    <div class="wrapper">
        <nav id="nav-hubs">
            <h4>Solution Centers</h4>
            <a href="http://ibmsmartercommerce.sourceforge.net/">Smarter Commerce</a>
            <a href="http://goparallel.sourceforge.net/">Go Parallel</a>
            <a href="http://html5center.sourceforge.net/">HTML5</a>
            <a href="http://ibmsmarteritservices.sourceforge.net/">Smarter IT</a>
        </nav>
        <nav id="nav-collateral">
            <a href="http://library.slashdotmedia.com/?source=sfnet_header">Resources</a>
            
            <a href="">Newsletters</a>
            
        </nav>
    </div>
</header>
    
    
    
    
    
    <section id="page-body" class=" neighborhood-Projects project-javaocr mountpoint-wiki">
	  <div id="nav_menu_holder">
            
            



    
    
    
    
    <nav id="breadcrumbs">
        <ul>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/">Home</a></li>
            <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/directory">Browse</a></li>
            
            
                
            
            
            
                <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/p/">Projects</a></li>
                
            
            
                <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb"><a itemprop="url" href="/p/javaocr/">Java OCR</a></li>
                
            
            
                <li itemscope itemtype="http://data-vocabulary.org/Breadcrumb">Wiki</li>
                
            
        </ul>
    </nav>
    
    
  
      
    
    <div id="LeadGen_Developer_page" class="ad">
    <iframe height="70" width="384"
        src="/static/ads/iframe_ad.html?position=LeadGen_Developer_page&amp;ad=%2F%2Fad.doubleclick.net%2FN4140%2Fadj%2Fostg.sourceforge%2FLeadGen_Developer_page%3Bsz%3D384x70%3Blogged_in%3D0%3Btile%3D1%3Bu%3De%253A9b15962e-c080-11e3-ab3e-0200ac1d2937%3Bord%3D9779073937313926%3F&amp;class="
        seamless frameborder="0" scrolling="no"></iframe>
    <noscript><a href="//ad.doubleclick.net/N4140/jump/ostg.sourceforge/LeadGen_Developer_page;sz=384x70;logged_in=0;tile=1;u=e%3A9b15962e-c080-11e3-ab3e-0200ac1d2937;ord=9779073937313926?"><img src="//ad.doubleclick.net/N4140/ad/ostg.sourceforge/LeadGen_Developer_page;sz=384x70;logged_in=0;tile=1;u=e%3A9b15962e-c080-11e3-ab3e-0200ac1d2937;ord=9779073937313926?" width="384" height="70" /></a></noscript>
    </div>
  
    
      <img src="/p/javaocr//icon?2012-09-15 08:55:11+00:00" class="project_icon" alt="Project Logo">
    
    <h1 class="project_title">
        <a href="/p/javaocr/" class="project_link">Java OCR</a>
    </h1>
    
    
    
    <span id="dev-status" class="alpha">alpha</span>
    
    <h2 class="project_summary with-icon">
        
    </h2>
    
    <div class="brought-by with-icon">
        Brought to you by:
        
        
            
                <a href="/u/ko5tik/">ko5tik</a>,
            
            
                <a href="/u/mrwwhitney/">mrwwhitney</a>,
            
            
                <a href="/u/roncemer/">roncemer</a>
            </div>
    

            
      </div>
      <div id="top_nav" class="">
        
        
<ul class="dropdown">
  
    <li class="">
        <a href="/projects/javaocr/" class="ui-icon-tool-summary-32">
            Summary
        </a>
        
        
    </li>
	
    <li class="">
        <a href="/projects/javaocr/files/" class="ui-icon-tool-files-32">
            Files
        </a>
        
        
    </li>
	
    <li class="">
        <a href="/projects/javaocr/reviews" class="ui-icon-tool-reviews-32">
            Reviews
        </a>
        
        
    </li>
	
    <li class="">
        <a href="/projects/javaocr/support" class="ui-icon-tool-support-32">
            Support
        </a>
        
        
    </li>
	
    <li class="selected">
        <a href="/p/javaocr/wiki/" class="ui-icon-tool-wiki-32">
            Wiki
        </a>
        
        
    </li>
	
    <li class="">
        <a href="/p/javaocr/source/" class="ui-icon-tool-git-32">
            git
        </a>
        
        
    </li>
	
    <li class="">
        <a href="/p/javaocr/mailman/" class="ui-icon-tool-mailman-32">
            Mailing Lists
        </a>
        
        
    </li>
	
    <li class="">
        <a href="http://sourceforge.net/apps/trac/javaocr/" class="ui-icon-tool-hosted_apps-32">
            Trac
        </a>
        
        
    </li>
	
    <li class="">
        <a href="/p/javaocr/_list/tickets" class="ui-icon-tool-tickets-32">
            Tickets â–¾
        </a>
        
        
            <ul>
                
                    <li class=""><a href="/p/javaocr/bugs/">Bugs</a></li>
                
                    <li class=""><a href="/p/javaocr/support-requests/">Support Requests</a></li>
                
                    <li class=""><a href="/p/javaocr/patches/">Patches</a></li>
                
                    <li class=""><a href="/p/javaocr/feature-requests/">Feature Requests</a></li>
                
            </ul>
        
    </li>
	
    <li class="">
        <a href="/p/javaocr/code/" class="ui-icon-tool-svn-32">
            legacy svn
        </a>
        
        
    </li>
	
    <li class="">
        <a href="/p/javaocr/donate/" class="ui-icon-tool-link-32">
            Donate
        </a>
        
        
    </li>
	
</ul>

        
      </div>
      <div id="content_base">
      
			  
			    
          


<div id="sidebar">
  
    <form id="search" method="GET" action="/p/javaocr/wiki/search/">
      <input name="q" type="text" title="Search Wiki" placeholder="Search Wiki">
    </form>
  
    
    
      
        
    
    
  
      
        
    
      <ul class="sidebarmenu">
      
    
    <li>
      <a href="/p/javaocr/wiki/" class="wiki_home"><span>Wiki Home</span></a>
    </li>
  
      
        
    
    <li>
      <a href="/p/javaocr/wiki/browse_pages/"><span>Browse Pages</span></a>
    </li>
  
      
        
    
    <li>
      <a href="/p/javaocr/wiki/browse_tags/"><span>Browse Labels</span></a>
    </li>
  
      
        
    
      </ul>
      
    
    
  
      
        
    
      <ul class="sidebarmenu">
      
    
    <li>
      <a href="/p/javaocr/wiki/markdown_syntax/"><span>Formatting Help</span></a>
    </li>
  
      
    
    
      </ul>
      
    
    
</div>
          
          
			  
			  
          
        
        <div class="grid-20 pad">
          <h2 class="dark title">image recognition using moments
            <!-- actions -->
            <small>
            
  
    
    <a href="history" title="History"><b data-icon="N" class="ico ico-history" title="History"></b></a>
  
  
	<a href="feed" title="RSS"><b data-icon="f" class="ico ico-feed" title="Feed"></b></a>
  <a href="../search" title="Search"><b data-icon="s" class="ico ico-search" title="Search"></b></a>

            </small>
            <!-- /actions -->
          </h2>
		
  
<div class="editbox">
  
  <div class="grid-9 gravatar sm">
    <label class="simple">Authors: </label>
    
      
        
            <a href="/u/ko5tik/">
                
                    
    
  
    <img src="https://secure.gravatar.com/avatar/d93c93f1f270a7e78360d8ace7fe9b55?r=pg"
         alt="Konstantin Pribluda"
         title="Konstantin Pribluda"
         class="emboss x16">
  
  
                
            </a>
        
    
    
  </div>
   
</div>


          <div>
            
            
  
<div class="markdown_content"><h1 id="text-recognition-using-invariant-moments">Text recognition  using invariant moments</h1>
<h2 id="image-formats-and-base-filters">Image formats and base filters</h2>
<p>JavaOCR is optimised for perfromance and low memory footprint.  Images are monochrome and pixel data stored in linear arrays (byte integer and float pixels are supported).  Several image objects can be created over the same pixel data with different offsets and sizes ( image object provides lookup in pixel array utilising origin offset and scan  length ) without copying them (chiseling).  This feature allows easy creation if image processing pipelines.</p>
<p>Image objects provide iteration routines for  image filtering, and filter object do actual work. Some of them do not modify images, some work in place and some write results in separate images. Basic filters include thresholding, lookup,  range,  histogram processing  etc.   See sources in: <em>core/src/main/java/netsourceforge/javaocr/filter/</em></p>
<h2 id="binarisation">Binarisation</h2>
<p>Prior to text recognition incoming image  has to be converted to black and  white binary image.  There is a lot  of possible filters, ranging from simplest (and thus fastest) threshold, adaptive threshold up to sophysticated  <a class="" href="http://scholar.google.com/scholar?q=sauvola+binarization+algorithm" rel="nofollow">sauvola filters</a></p>
<p>Sauvola binarisation is computational intensive (it is windowed filter),   but it also provides kind of high-pass and low-pass filetring, which can be tuned by filter parameters for optimal binarisation results ( implementation is located in file: core/src/main/java/net/sourceforge/javaocr/filter/SauvolaBinarisationFilter.java )</p>
<p>This filter is tunable by weight ( determines weight of variance over the window component in computation ) and window size ( determines computation window,  as we use integral images to computation overall processing time is independent of window size,  I use 50x50 on android phones ): </p>
<div class="codehilite"><pre>    <span class="c1">// process image has borders of proper size (half window)</span>
    <span class="n">processImage</span> <span class="o">=</span> <span class="n">new</span> <span class="n">PixelImage</span><span class="p">(</span><span class="n">w</span> <span class="o">+</span> <span class="n">SAUVOLA_WINDOW</span><span class="p">,</span> <span class="n">h</span> <span class="o">+</span> <span class="n">SAUVOLA_WINDOW</span><span class="p">);</span>
    <span class="c1">// return image is chiseled out of process image (less borders)</span>
    <span class="n">returnImage</span> <span class="o">=</span> <span class="p">(</span><span class="n">PixelImage</span><span class="p">)</span> <span class="n">processImage</span><span class="p">.</span><span class="n">chisel</span><span class="p">(</span><span class="n">SAUVOLA_WINDOW</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">SAUVOLA_WINDOW</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">);</span>

    <span class="n">sauvolaBinarisationFilter</span> <span class="o">=</span> <span class="n">new</span> <span class="n">SauvolaBinarisationFilter</span><span class="p">(</span><span class="n">above</span><span class="p">,</span> <span class="n">below</span><span class="p">,</span> <span class="n">processImage</span><span class="p">,</span> <span class="mi">256</span><span class="p">,</span> <span class="n">SAUVOLA_WEIGHT</span><span class="p">,</span> <span class="n">SAUVOLA_WINDOW</span><span class="p">);</span>
</pre></div>
<p>This sample demonstrates sauvola filter preparation for image processing.  Note that result image  (<em>returnImage</em>) is cut out of filter destination image -  for performance reasons  results of window filters are not computed for image borders of respective size. </p>
<h2 id="location-of-text-and-characters">Location of text and characters</h2>
<p>JavaOCR has no direct support to locate lines of text  and individual characters (<em>volunters are welcome</em>) -  android demos utilize  aiming  help to assist used in positioning camera properly.  I case you are sure that text lines are aligned horisontally you may use  integral images to determine position of text lines and further glyph extraction.</p>
<h2 id="invariant-moments">Invariant moments</h2>
<p><a class="" href="http://en.wikipedia.org/wiki/Invariant_Moments" rel="nofollow">Invariant moments</a>  computed over image have properties useful for image recognition - most notably independency from translation, rotation  and scaling of images.  Carefully choosen set of moments  (just a vestor of float values ) can be  used to match against known characters using standart techniques for cluster analysis.  <a class="" href="http://en.wikipedia.org/wiki/Hu_moments#Rotation_invariant_moments" rel="nofollow">Hu moments</a> are most popular and well known set of moments to use for image recognition</p>
<h2 id="training">Training</h2>
<p>Once you extracted image features (with invariant moments or by other means)  you have just vector of fliat point numbers -   it represents a point in some  space and can be matched  to specific character class. To perform matching you will need:</p>
<ul>
<li>defined clusters correspoding to individual characters ( there can be more than one cluster for given character, say for different fonts)</li>
<li>metric function to determine distance between point and cluster ( simplesexample would be euclidian metric,  JavaOCR prvides <a class="" href="http://en.wikipedia.org/wiki/Mahalanobis_distance" rel="nofollow">mahalanobis distance</a>  which delievers better results )</li>
</ul>
<p>Clusters are established by learning  process. First you have to collect samples  for desired characters / fonts / resoultions.  You shall have reasonable amount of samples (you decide what is reasonable here,  I try to have about 200 per character).  JavaOCR provides demo appliction for sampling with android phone ( demos/sampler/ subdirectory)</p>
<p>Once you  have samples you can start training. demos/trainer contains sample java application which you can use as template.  Training is simple process</p>
<ul>
<li>extract image features ( it shall be the same feature set you will use in recognition )</li>
<li>build initial clusters for character </li>
<li>use cluster analysis to build real clusters used in recognition ( with some arcane mahematical methods, sample is available ) </li>
<li>perform cluster matching to  determine quality of solution</li>
<li>adjust features and clustering algorithms, rinse, repeat until you get acceptable quality</li>
</ul>
<p>after you have achieved acceptable configuration you can serialise  cluster objects to JSON (or by other means) and use them in real world applications. There will be one or more clusters for everz trained character</p>
<h2 id="matching">Matching</h2>
<p>Once you have feature extractors and configured cluster objects matching is easy.</p>
<ul>
<li>obtain single character glyph ( binarise image,  slice it up )</li>
<li>compute desired image moments</li>
<li>compute "distance" between verctor and all the clusters</li>
<li>order cluster by distance to feature vector, trow away poor matching clusters</li>
</ul>
<p>Now you have list of clusters (correspondig to characters) ordered by probablity - take first one, <br />
this is most probably your result. </p></div>

  <div id="create_wiki_page_holder" title="Create New Page" style="display:none">
    <form>
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"/></div>
    </form>
  </div>

          </div>
			
          
  <hr class="grid-19" style="margin-top: 1em; margin-bottom: 2em; clear:both;">
  
  
    <h4>Related</h4>
    <p>
    
      
        
        
          
        
      
      <a href="/p/javaocr/wiki/Home/">Wiki: Home</a><br>
    
    </p>
  
  
    
    <div>

<div>
                <div class="row">
                        <div class="column grid_12">
      
        <div>
  <div class="page_list">
    
  </div>
  <div class="clear"></div>
</div>
      
      <div id="comment">
        
          
        
      </div>
      <div style="clear:both"></div>
      
      <div style="clear:both"></div>
    </div>
  </div>
</div>
</div>
  

        </div>
      
      </div>
    </section>
      
<footer id="site-footer">
    <div class="wrapper">
        <nav>
            <h5>SourceForge</h5>
            <a href="/about">About</a>
            <a href="/blog/category/sitestatus/">Site Status</a>
            <a href="http://twitter.com/sfnet_ops">@sfnet_ops</a>
            <a id="allura-notice" href="https://forge-allura.apache.org/p/allura/">Powered by Allura</a>
        </nav>
        <nav>
            <h5>Find and Develop Software</h5>
            <a href="/create/">Create a Project</a>
            <a href="/directory/">Software Directory</a>
            <a href="/top">Top Downloaded Projects</a>
        </nav>
        <nav>
            <h5>Community</h5>
            <a href="/blog/">Blog</a>
            <a href="http://twitter.com/sourceforge">@sourceforge</a>
            <a href="/jobs?source=footer">Job Board</a>
            <a href="http://library.slashdotmedia.com/?source=sfnet_footer">Resources</a>
        </nav>
        <nav>
            <h5>Help</h5>
            <a href="http://p.sf.net/sourceforge/docs">Site Documentation</a>
            <a href="/support">Support Request</a>
            <a href="http://p.sf.net/sourceforge/irc">Real-Time Support</a>
        </nav>
    </div>
</footer>
<footer id="site-copyright-footer">
    <div class="wrapper">
        <div id="copyright">
            Copyright &copy; 2014 SourceForge. All Rights Reserved.<br />
            SourceForge is a <a href="http://www.diceholdingsinc.com/phoenix.zhtml?c=211152&amp;p=irol-landing">Dice Holdings, Inc.</a> company.
        </div>
        <nav>
            <a href="http://slashdotmedia.com/terms-of-use">Terms</a>
            <a href="http://slashdotmedia.com/privacy-statement/">Privacy</a>
            <span id='teconsent'></span>
            <a href="http://slashdotmedia.com/opt-out-choices">Opt Out Choices</a>
            <a href="http://slashdotmedia.com">Advertise</a>
            <a href="http://sourceforge.jp/">SourceForge.JP</a>
        </nav>
    </div>
</footer>
    <div id="messages">
        
    </div>
    
    
      <!-- ew:body_js -->

    
      <script type="text/javascript" src="http://a.fsdn.com/allura/nf/1396471045/_ew_/_slim/js?href=allura%2Fjs%2Fjquery-base.js%3Ballura%2Fjs%2Fjquery.notify.js%3Ballura%2Fjs%2Fmodernizr.js%3Ballura%2Fjs%2Fsylvester.js%3Ballura%2Fjs%2Fpb.transformie.min.js%3Ballura%2Fjs%2Fallura-base.js%3Bjs%2Fjquery.lightbox_me.js%3Bjs%2Fjquery.autosize-min.js%3Bjs%2Fjquery.textarea.js%3Bjs%2Fsf_markitup.js%3Bjs%2Fjquery.tagsinput.js"></script>
    
      
<!-- /ew:body_js -->

    
    
      <!-- ew:body_js_tail -->

    
      <script type="text/javascript">$(function () {
            var $lightbox = $('#lightbox_create_wiki_page');
            var $trigger = $('#sidebar a.add_wiki_page');
            $trigger.bind('click', function(e) {
                $lightbox.lightbox_me();
                return false;
            });
            $($lightbox).delegate('.close', 'click', function(e) {
                $lightbox.trigger('close');
                return false;
            });
        });
$(function () {
            $('#lightbox_create_wiki_page form').submit(function(){
                location.href = $('#sidebar a.add_wiki_page').attr('href') +
                    encodeURIComponent($('input[name=name]', $(this)).val().replace('/', '-')) + '/edit';
                return false;
            });
        });
$(function () {
            $('textarea.auto_resize').focus(function(){$(this).autosize();});
        });
$(document).ready(function () {
            $("a.attachment_form_add_button").click(function(evt){
                $(this).hide();
                $(".attachment_form_fields", this.parentNode).show();
                evt.preventDefault();
            });
            $("a.cancel_edit_post").click(function(evt){
                $("textarea", this.parentNode).val($("input.original_value", this.parentNode).val());
                $(".attachment_form_fields input", this.parentNode).val('');
                evt.preventDefault();
            });
         });

        (function () {
            $('div.discussion-post').each(function () {
                var post = this;
                $('.submit', post).button();
                $('.flag_post', post).click(function (ele) {
                    this.parentNode.submit();
                    return false;
                });
                $('.moderate_post', post).click(function(e){
                    e.preventDefault();
                    var mod = $(this).text();
                    if (mod === 'Delete' && !confirm('Really delete this post?')) {
                        return;
                    }
                    var id_post = $(post).attr('id');
                    $.ajax({
                        type: 'POST',
                        url: this.parentNode.action,
                        data: jQuery(this.parentNode).serialize(),
                        success: function() {
                            if (mod == 'Delete'){
                                $(post).remove();
                            }
                            else if (mod == 'Approve'){
                                $('a.reply_post, a.shortlink, form.moderate_spam, form.moderate_approve', post).toggle();
                                $('div.moderate', post).removeClass('moderate');
                            }
                            else if (mod == 'Spam'){
                                $(post).remove();
                            }
                        }
                    });
                });

                if($('a.edit_post', post)){
                    $('a.edit_post', post).click(function (ele) {
                        $('.display_post', post).hide();
                        $('.edit_post_form', post).show();
                        // Calling jQuery's ".focus()" forces browser to reload page
                        // while using IE11 with sourceforge theme
                        $('.edit_post_form textarea', post)[0].focus();
                        return false;
                    });
                    $("a.cancel_edit_post", post).click(function(evt){
                        $('.display_post', post).show();
                        $('.edit_post_form', post).hide();
                    });
                }
                if($('.reply_post', post)){
                    $('.reply_post', post).click(function (ele) {
                        $('.reply_post_form', post).show();
                        // Calling jQuery's ".focus()" forces browser to reload page
                        // while using IE11 with sourceforge theme
                        $('.reply_post_form textarea', post)[0].focus();
                        return false;
                    });
                    $('.reply_post', post).button();
                }
                if($('.add_attachment', post)){
                    $('.add_attachment', post).click(function (ele) {
                        $('.add_attachment_form', post).show();
                        return false;
                    });
                }
                if($('.shortlink', post)){
                    var popup = $('.shortlink_popup', post);
                    $('.shortlink', post).click(function(evt){
                        evt.preventDefault();
                        popup.lightbox_me({
                            onLoad: function() {
                                $('input', popup).select();
                            }
                        });
                    });
                    $('.close', popup).bind('click', function() {
                        popup.hide();
                    });
                }
            });
        }());
        
$(function () {
            $('select.results_per_page').change(function () {
                this.form.submit();});});
$(function () {
          $('input.label_edit').tagsInput({
              'height':'100%',
              'width':'100%',
              'autocomplete_url':'/p/javaocr/wiki/tags'
          });
          $('form').on('blur', '.ui-autocomplete-input', function() {
              setTimeout(function(){
                  var clicked = $(document.activeElement); // This is the element that has focus
                  if (clicked.is('#ui-active-menuitem')) {
                      return false;
                  } else {
                      var value = $('div.tagsinput div input').val();
                      var exists = $('input.label_edit').tagExist(value);
                      var default_value = $('div.tagsinput div input').attr('data-default');
                      if ((value !== default_value) && (!exists) && value !== '') {
                          $('input.label_edit').addTag(value);
                      }
                      $('input[type=submit]', this).attr('disabled', 'disabled');
                  }
                }, 1);
            });
        });

        $(document).ready(function () {
            var thread_tag = $('a.thread_tag');
            var thread_spam = $('a.sidebar_thread_spam');
            var tag_thread_holder = $('#tag_thread_holder');
            var allow_moderate = $('#allow_moderate');
            var mod_thread_link = $('#mod_thread_link');
            var mod_thread_form = $('#mod_thread_form');
            if (mod_thread_link.length) {
                if (mod_thread_form.length) {
                    mod_thread_link.click(function (e) {
                        mod_thread_form.show();
                        return false;
                    });
                }
            }
            if (thread_tag.length) {
                if (tag_thread_holder.length) {
                    var submit_button = $('input[type="submit"]', tag_thread_holder);
                    var cancel_button = $('<a href="#" class="btn link">Cancel</a>').click(function(evt){
                        evt.preventDefault();
                        tag_thread_holder.hide();
                        thread_tag.removeClass('active');
                    });
                    submit_button.after(cancel_button);
                    thread_tag.click(function (e) {
                        tag_thread_holder.show();
                        thread_tag.addClass('active');
                        // focus the submit to scroll to the form, then focus the subject for them to start typing
                        submit_button.focus();
                        $('input[type="text"]', tag_thread_holder).focus();
                        return false;
                    });
                }
            }
            if (thread_spam.length) {
                if (allow_moderate.length) {
                    var cval = $.cookie('_session_id');
                    thread_spam[0].style.display='block';
                }
            }
        });
        </script>
    
      
<!-- /ew:body_js_tail -->

    
    
  <div id="lightbox_create_wiki_page" class="modal" style="display:none">
  <b data-icon="D" class="ico ico-close close"></b>
  
    
    <h1>Add a Wiki Page</h1>
    <form class="grid-10">
        <label class="grid-2">Name</label>
        <div class="grid-7"><input type="text" name="name"></div>
        <label class="grid-2">&nbsp;</label>
        <div class="grid-7"><input type="submit" value="Create page"></div>
    </form>
  
  
</div>
<script type="text/javascript">
  $('.post-link')
    .click(function() {
        var dialog_text = $(".confirm_revert_"+$(this).data("version"));
        var modal = $('#lightbox_revert');
        modal.html(dialog_text.html());
        modal.find('.continue_revert').click(function(evt) {
          var cval = $.cookie('_session_id');
          evt.preventDefault();
          $.post($(this).attr('href'), {_session_id:cval}, function(val)
              { window.location = val.location; },
              'json');
          });
      });
</script>
  

    
      
    
    
   
    <script src="//s.fsdn.com/con/js/webtracker.js" type="text/javascript"></script>
    <!-- Google Code for Remarketing tag -->
    <!-- Remarketing tags may not be associated with personally identifiable information or placed on pages related to sensitive categories. For instructions on adding this tag and more information on the above requirements, read the setup guide: google.com/ads/remarketingsetup -->
    <script type="text/javascript">
        /* <![CDATA[ */
        var google_conversion_id = 1002083962;
        var google_conversion_label = "G_uGCOaBlAQQ-qzq3QM";
        var google_custom_params = window.google_tag_params;
        var google_remarketing_only = true;
        /* ]]> */
    </script>
    <script type="text/javascript" src="//www.googleadservices.com/pagead/conversion.js"> </script>
    <script type="text/javascript" src='//consent-st.truste.com/get?name=notice.js&domain=slashdot.org&c=teconsent&text=true'></script>
    <noscript>
      <div style="display:inline;">
        <img height="1" width="1" style="border-style:none;" alt="" src="//googleads.g.doubleclick.net/pagead/viewthroughconversion/1002083962/?value=0&amp;label=G_uGCOaBlAQQ-qzq3QM&amp;guid=ON&amp;script=0"/>
      </div>
    </noscript>
    
  </body>
</html>